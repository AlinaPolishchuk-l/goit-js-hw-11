{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47380023-0cf9eda8f68e611c05b08262c';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 12) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    page: page,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data; \n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport function renderGallery(images) {\n  const gallery = document.querySelector('.gallery');\n\n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <a href=\"${largeImageURL}\" class=\"gallery-item\">\n      <div class=\"photo-card\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" />\n        <div class=\"info\">\n          <div class=\"item\"><h3>Likes</h3><p>${likes}</p></div>\n          <div class=\"item\"><h3>Views</h3><p>${views}</p></div>\n          <div class=\"item\"><h3>Comments</h3><p>${comments}</p></div>\n          <div class=\"item\"><h3>Downloads</h3><p>${downloads}</p></div>\n        </div>\n      </div>\n    </a>\n  `).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n    const loader = document.querySelector('#loader');\n    loader.classList.add('visible'); \n}\n\nexport function hideLoader() {\n    const loader = document.querySelector('#loader');\n    loader.classList.remove('visible'); \n}\n\n\nexport function showNoResultsMessage() {\n  iziToast.info({\n    title: 'No Results',\n    message: 'No images found for your search query. Please try again.',\n    position: 'topRight',\n  });\n}\n\nexport function showErrorMessage() {\n  iziToast.error({\n    title: 'Error',\n    message: 'Something went wrong. Please try again later.',\n    position: 'topRight',\n  });\n}\n","import './css/styles.css';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport {\n  renderGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showNoResultsMessage,\n  showErrorMessage,\n} from './js/render-functions';\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nlet currentPage = 1;\nlet currentQuery = '';\n\nform.addEventListener('submit', onSearch);\n\nasync function onSearch(event) {\n  event.preventDefault();\n\n  const query = event.target.elements.query.value.trim();\n\n  if (!query || query === currentQuery) {\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n  clearGallery();\n  showLoader();\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n\n    if (data.hits.length === 0) {\n      showNoResultsMessage();\n      return;\n    }\n\n    renderGallery(data.hits);\n  } catch (error) {\n    showErrorMessage();\n  } finally {\n    hideLoader();\n  }\n}\n\nwindow.addEventListener('scroll', onScroll);\n\nasync function onScroll() {\n  if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 200) {\n    currentPage += 1;\n\n    showLoader();\n\n    try {\n      const data = await fetchImages(currentQuery, currentPage);\n\n      if (data.hits.length === 0) {\n        showNoResultsMessage();\n        return;\n      }\n\n      renderGallery(data.hits);\n    } catch (error) {\n      showErrorMessage();\n    } finally {\n      hideLoader();\n    }\n  }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","params","axios","error","lightbox","renderGallery","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","showNoResultsMessage","iziToast","showErrorMessage","form","currentPage","currentQuery","onSearch","event","data","onScroll"],"mappings":"+vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,MAAMC,EAAS,CACb,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUE,EACV,KAAMD,CACP,EAED,GAAI,CAEF,OADiB,MAAMG,EAAM,IAAIN,EAAU,CAAE,OAAAK,EAAQ,GACrC,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACV,CACA,CCnBA,IAAIC,EAEG,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAASF,EAAO,IAAI,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA,eAC3FL,CAAa;AAAA;AAAA,oBAERD,CAAY,UAAUE,CAAI;AAAA;AAAA,+CAECC,CAAK;AAAA,+CACLC,CAAK;AAAA,kDACFC,CAAQ;AAAA,mDACPC,CAAS;AAAA;AAAA;AAAA;AAAA,GAIzD,EAAE,KAAK,EAAE,EAEVR,EAAQ,mBAAmB,YAAaC,CAAM,EAEzCJ,EAGHA,EAAS,QAAS,EAFlBA,EAAW,IAAIY,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,IAAK,CAI1F,CAEO,SAASC,GAAe,CAC7B,MAAMV,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACtB,CAEO,SAASW,GAAa,CACV,SAAS,cAAc,SAAS,EACxC,UAAU,IAAI,SAAS,CAClC,CAEO,SAASC,GAAa,CACV,SAAS,cAAc,SAAS,EACxC,UAAU,OAAO,SAAS,CACrC,CAGO,SAASC,GAAuB,CACrCC,EAAS,KAAK,CACZ,MAAO,aACP,QAAS,2DACT,SAAU,UACd,CAAG,CACH,CAEO,SAASC,GAAmB,CACjCD,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gDACT,SAAU,UACd,CAAG,CACH,CC/CA,MAAME,EAAO,SAAS,cAAc,cAAc,EAClC,SAAS,cAAc,UAAU,EACjD,IAAIC,EAAc,EACdC,EAAe,GAEnBF,EAAK,iBAAiB,SAAUG,CAAQ,EAExC,eAAeA,EAASC,EAAO,CAC7BA,EAAM,eAAgB,EAEtB,MAAM7B,EAAQ6B,EAAM,OAAO,SAAS,MAAM,MAAM,KAAM,EAEtD,GAAI,GAAC7B,GAASA,IAAU2B,GAIxB,CAAAA,EAAe3B,EACf0B,EAAc,EACdP,EAAc,EACdC,EAAY,EAEZ,GAAI,CACF,MAAMU,EAAO,MAAM/B,EAAY4B,EAAcD,CAAW,EAExD,GAAII,EAAK,KAAK,SAAW,EAAG,CAC1BR,EAAsB,EACtB,MACN,CAEIf,EAAcuB,EAAK,IAAI,CACxB,MAAe,CACdN,EAAkB,CACtB,QAAY,CACRH,EAAY,CAChB,EACA,CAEA,OAAO,iBAAiB,SAAUU,CAAQ,EAE1C,eAAeA,GAAW,CACxB,GAAI,OAAO,YAAc,OAAO,SAAW,SAAS,KAAK,aAAe,IAAK,CAC3EL,GAAe,EAEfN,EAAY,EAEZ,GAAI,CACF,MAAMU,EAAO,MAAM/B,EAAY4B,EAAcD,CAAW,EAExD,GAAII,EAAK,KAAK,SAAW,EAAG,CAC1BR,EAAsB,EACtB,MACR,CAEMf,EAAcuB,EAAK,IAAI,CACxB,MAAe,CACdN,EAAkB,CACxB,QAAc,CACRH,EAAY,CAClB,CACA,CACA"}